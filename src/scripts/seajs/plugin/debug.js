!function(){function isString(val){return"[object String]"=={}.toString.call(val)}function isLocalStorageNameSupported(){try{return localStorageName in win&&win[localStorageName]}catch(err){return!1}}function withIEStorage(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage),storageOwner.appendChild(storage),storage.addBehavior("#default#userData"),storage.load(localStorageName);var result=storeFunction.apply(store,args);return storageOwner.removeChild(storage),result}}function ieKeyFix(key){return key.replace(forbiddenCharsRegex,"___")}function trim(str){for(var whitespace=" \n\r	\f            ​\u2028\u2029　",i=0,len=str.length;len>i;i++)if(-1===whitespace.indexOf(str.charAt(i))){str=str.substring(i);break}for(i=str.length-1;i>=0;i--)if(-1===whitespace.indexOf(str.charAt(i))){str=str.substring(0,i+1);break}return-1===whitespace.indexOf(str.charAt(0))?str:""}function DebugPanel(){this.element=null,this._rendered=!1,this.children=["header","meta"]}function validateURL(textval){var urlregex=new RegExp("^(http|https|ftp)://([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0).(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9-]+.)*[a-zA-Z0-9-]+.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(/($|[a-zA-Z0-9.,?'\\+&amp;%$#=~_-]+))*$");return urlregex.test(textval)}function addEvent(el,type,fn,capture){el&&(el.addEventListener?el.addEventListener(type,fn,!!capture):el.attachEvent&&el.attachEvent("on"+type,fn))}function trim(str){for(var whitespace=" \n\r	\f            ​\u2028\u2029　",i=0,len=str.length;len>i;i++)if(-1===whitespace.indexOf(str.charAt(i))){str=str.substring(i);break}for(i=str.length-1;i>=0;i--)if(-1===whitespace.indexOf(str.charAt(i))){str=str.substring(0,i+1);break}return-1===whitespace.indexOf(str.charAt(0))?str:""}function appendToBody(div,callback){pollCount++,doc.body?(doc.body.appendChild(div),callback&&callback()):MAX_TRY>pollCount&&setTimeout(function(){appendToBody(div,callback)},200)}function indexOf(array,item){if(null==array)return-1;var i=0,length=array.length,nativeIndexOf=Array.prototype.indexOf;if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(;length>i;i++)if(array[i]===item)return i;return-1}seajs.importStyle("@font-face {    font-family: 'fontello';    src: url('https://i.alipayobjects.com/common/fonts/seajs-debug/fontello.eot');    src: url('https://i.alipayobjects.com/common/fonts/seajs-debug/fontello.eot#iefix') format('embedded-opentype'), /* IE6-IE8 */ url('https://i.alipayobjects.com/common/fonts/seajs-debug/fontello.woff') format('woff'),  /* chrome 6+、firefox 3.6+、Safari5.1+、Opera 11+ */ url('https://i.alipayobjects.com/common/fonts/seajs-debug/fontello.ttf') format('truetype'), /* chrome、firefox、opera、Safari, Android, iOS 4.2+ */ url('https://i.alipayobjects.com/common/fonts/seajs-debug/fontello.svg') format('svg'); /* iOS 4.1- */    font-weight: normal;    font-style: normal;}#seajs-debug-console #seajs-debug-status button,#seajs-debug-console #seajs-debug-meta button,#seajs-debug-console #seajs-debug-map button {    font-family: 'fontello';}#seajs-debug-console, #seajs-debug-console * {    margin: 0;    padding: 0;    border: none;    font: 14px/1.2 Arial}#seajs-debug-console {    position: fixed;    width: 520px;    right: 10px;    bottom: 10px;    border: 2px solid #564F8A;    z-index: 2147483647;    background: #fafafa;}#seajs-debug-console a, #seajs-debug-console a:hover, #seajs-debug-console a:active, #seajs-debug-console a:link {    text-decoration: none;}#seajs-debug-console button {    border: none;    background: transparent;    cursor: pointer;    -webkit-user-select: none;    -moz-user-select: none;    -ms-user-select: none;    -o-user-select: none;    user-select: none;}#seajs-debug-console #seajs-debug-header,#seajs-debug-console #seajs-debug-editor,#seajs-debug-console #seajs-debug-map,#seajs-debug-console #seajs-debug-health {    border: none;    border-bottom: 1px solid lightgrey;}#seajs-debug-console #seajs-debug-header {    margin: 0;    padding: 5px 5px 5px 10px;    height: 20px;    line-height: 20px;    font-weight: bold;    font-size: 16px;    background: #564F8A;    color: #cdbfe3;}#seajs-debug-console #seajs-debug-editor,#seajs-debug-console #seajs-debug-map,#seajs-debug-console #seajs-debug-health {    min-height: 100px;    _height: 100px;    background: #FFF;}#seajs-debug-console #seajs-debug-editor,#seajs-debug-console #seajs-debug-map p input {    font-family: Courier, monospace;    color: #666;}#seajs-debug-console #seajs-debug-editor {    display: block;    width: 510px;    padding: 5px;    resize: vertical;}#seajs-debug-console #seajs-debug-map {    padding: 5px 0;}#seajs-debug-console #seajs-debug-map p {    height: 30px;    line-height: 30px;    overflow: hidden;    padding-left: 10px;}#seajs-debug-console #seajs-debug-map p input {    padding-left: 6px;    height: 24px;    line-height: 24px;    border: 1px solid #dcdcdc;    width: 200px;    vertical-align: middle;    *vertical-align: bottom;}#seajs-debug-console #seajs-debug-map .seajs-debug-hit input {    border-color: #cdbfe3;    background-color: #F6F0FF;}#seajs-debug-console #seajs-debug-map button {    color: #999;}#seajs-debug-console #seajs-debug-map button,#seajs-debug-console #seajs-debug-meta button {    width: 30px;    height: 30px;    line-height: 30px;    text-align: center;}#seajs-debug-console #seajs-debug-status {    height: 35px;}#seajs-debug-console #seajs-debug-status span {    display: inline-block;    *display: inline;    *zoom: 1;    height: 35px;    line-height: 35px;    padding-left: 8px;    color: #AAA;    vertical-align: middle;}#seajs-debug-console #seajs-debug-status button {    width: 35px;    height: 35px;    line-height: 35px;    color: #999;    border: none;    font-size: 16px;    vertical-align: middle;    _vertical-align: top;}#seajs-debug-console #seajs-debug-status button:hover,#seajs-debug-console #seajs-debug-status button.seajs-debug-status-on:hover {    background-color: #f0f0f0;    color: #000;}#seajs-debug-console #seajs-debug-status button:active,#seajs-debug-console #seajs-debug-status button.seajs-debug-status-on {    color: #563d7c;    text-shadow: 0 0 6px #cdbfe3;    background-color: #f0f0f0;}#seajs-debug-console #seajs-debug-action {    float: right;    margin-top: -31px;    *margin-top: -32px;    margin-right: 2px;}#seajs-debug-console #seajs-debug-action button {    position: relative;    z-index: 2;    width: 60px;    height: 28px;    border-radius: 2px;    text-align: center;    color: #333;    background-color: #fff;    border: 1px solid #ccc;    text-transform: uppercase;    *margin-left: 4px;}#seajs-debug-console #seajs-debug-action button:hover,#seajs-debug-console #seajs-debug-action button:focus,#seajs-debug-console #seajs-debug-action button:hover,#seajs-debug-console #seajs-debug-action button:active {  background-color: #ebebeb;  border-color: #adadad;}#seajs-debug-console #seajs-debug-action button:active {    position: relative;    top: 1px;    -webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);    -moz-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);    box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);}#seajs-debug-console #seajs-debug-meta {    position: absolute;    right: 0;    top: 0;}#seajs-debug-console #seajs-debug-meta button {    background: #3f386d;    color: white;}#seajs-debug-console #seajs-debug-health {    height: 500px;    /* loading */}/*-webkit-animation: spin 2s infinite linear;-moz-animation: spin 2s infinite linear;-o-animation: spin 2s infinite linear;-ms-animation: spin 2s infinite linear;animation: spin 2s infinite linear;*/#seajs-debug-console.seajs-debug-mini {    width: 30px;    height: 30px;    border: none;}/* ie6 */#seajs-debug-console {    _position: absolute;    _top: expression(documentElement.scrollTop+documentElement.clientHeight-this.clientHeight-5);}* html {    _background: url(null) no-repeat fixed;}");var storage,doc=document,win=window,loc=location,store={},localStorageName="localStorage",namespace="__storejs__";if(store.disabled=!1,store.set=function(key,value){},store.get=function(key){},store.serialize=function(value){if(isString(value))return value;var html=[];for(var key in value){var val=value[key];if(isString(val))val=val.replace(/'/g,'"').replace(/\n/g,"\\n").replace(/\r/g,"\\r"),val="'"+val+"'";else if(val.hasOwnProperty("length")){for(var tmp=[],i=0;i<val.length;i++){var f=trim(val[i][0]),t=trim(val[i][1]);f.length&&t.length&&tmp.push('["'+f+'","'+t+'"]')}val="["+tmp.join(",")+"]"}html.push(""+key+":"+val)}return"{"+html.join(",")+"}"},store.deserialize=function(value){if(!isString(value))return void 0;try{return new Function("return "+value)()}catch(e){return void 0}},isLocalStorageNameSupported())storage=win[localStorageName],store.set=function(key,val){return void 0===val?store.remove(key):(storage.setItem(key,store.serialize(val)),val)},store.get=function(key){return store.deserialize(storage.getItem(key))};else if(doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject("htmlfile"),storageContainer.open(),storageContainer.write('<script>document.w=window</script><iframe src="/favicon.ico"></iframe>'),storageContainer.close(),storageOwner=storageContainer.w.frames[0].document,storage=storageOwner.createElement("div")}catch(e){storage=doc.createElement("div"),storageOwner=doc.body}var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");store.set=withIEStorage(function(storage,key,val){return key=ieKeyFix(key),void 0===val?store.remove(key):(storage.setAttribute(key,store.serialize(val)),storage.save(localStorageName),val)}),store.get=withIEStorage(function(storage,key){return key=ieKeyFix(key),store.deserialize(storage.getAttribute(key))})}try{store.set(namespace,namespace),store.get(namespace)!=namespace&&(store.disabled=!0),store.remove(namespace)}catch(e){store.disabled=!0}var config={debug:!0,show:!0,source:!1,nocache:!1,combo:!1,log:!1,health:!1,mode:!1,custom:"",mapping:[]},_config=store.get("seajs-debug-config");for(var key in _config)config[key]=_config[key];var global=window,MAX_TRY=100,pollCount=0,PREFIX="seajs-debug-",STATUS_BUTTON_ON_CLS=PREFIX+"status-on",MIN_CLS=PREFIX+"mini",HIT_CLS=PREFIX+"hit";DebugPanel.prototype.render=function(children,cbk){var that=this;if(this._rendered)return void(cbk&&cbk());this._rendered=!0;for(var i=0;i<children.length;i++)-1===indexOf(this.children,children[i])&&this.children.push(children[i]);this.element=doc.createElement("div"),this.element.id=PREFIX+"console",this.element.style.display="none";for(var tmpHTML="",i=0;i<this.children.length;i++){var item=this.children[i],fn=this["_render"+item.charAt(0).toUpperCase()+item.substring(1)];fn&&(tmpHTML+=fn.call(that))}this.element.innerHTML=tmpHTML,appendToBody(this.element,function(){for(var i=0;i<that.children.length;i++){var item=that.children[i];that[item+"Element"]=doc.getElementById(PREFIX+item);var fn=that["_bind"+item.charAt(0).toUpperCase()+item.substring(1)];fn&&fn.call(that)}that.element.style.display="block",that[config.show?"show":"hide"](),cbk&&cbk()})},DebugPanel.prototype._renderHeader=function(){return'<h3 id="'+PREFIX+'header" style="display: none;">Sea.js Debug Console</h3>'},DebugPanel.prototype._renderMap=function(){var tmpHTML="";config.mapping.push(["","",!0]);for(var i=0;i<config.mapping.length;i++){var item=config.mapping[i];tmpHTML+='<p><input type="text" placeholder="Input source URI" title="Source URI" value="'+item[0]+'" /><button style="cursor: default;">&#xe80c;</button><input type="text" placeholder="Input target URI" title="Target URI" value="'+item[1]+'" /><button data-name="add" '+(item[2]?"":'style="display: none;"')+'>&#xe804;</button><button data-name="red" '+(item[2]?'style="display: none;"':"")+">&#xe805;</button></p>"}return'<div id="'+PREFIX+'map" style="display: none;">'+tmpHTML+"</div>"},DebugPanel.prototype._renderEditor=function(){return'<textarea id="'+PREFIX+'editor" style="display: none;">'+config.custom+"</textarea>"},DebugPanel.prototype._renderStatus=function(){this.statusInfo=[["source","Switch to min files","Switch to source files","&#xe80b;"],["combo","Enable combo","Disable combo","&#xe801;"],["nocache","Enable cache","Disable cache","&#xe806;"],["log","Hide seajs log","Show seajs log","&#xe809;"],["mode","Switch mapping mode","Switch editor mode","&#xe808;",function(status){this.show()}]];for(var tmpHTML="",i=0;i<this.statusInfo.length;i++){var item=this.statusInfo[i],status=item[0];tmpHTML+="<button "+(config[status]?'class="'+STATUS_BUTTON_ON_CLS+'"':"")+' title="'+item[config[status]?1:2]+'">'+item[3]+"</button>"}return'<div id="'+PREFIX+'status" style="display: none;">'+tmpHTML+"<span></span></div>"},DebugPanel.prototype._renderAction=function(){this.actionInfo=[["Save",function(){for(var mappingString=[],allInput=this.mapElement.getElementsByTagName("input"),i=0;i<allInput.length;){var from=trim(allInput[i].value),to=trim(allInput[i+1].value);if(from.length&&to.length){if(!validateURL(from))return allInput[i].focus(),allInput[i].select(),alert("Invalid URL: "+from),!1;if(!validateURL(to))return allInput[i+1].focus(),allInput[i+1].select(),alert("Invalid URL: "+to),!1;mappingString.push([from,to])}i+=2}config.mapping=mappingString;try{return new Function("return "+this.editorElement.value+";")(),config.custom=trim(this.editorElement.value),!0}catch(e){return alert("invalid config"),this.editorElement.focus(),!1}},!1],["Exit",function(){return config.debug=!1,!0},!0]];for(var tmpHTML="",i=0;i<this.actionInfo.length;i++){var item=this.actionInfo[i];tmpHTML+="<button>"+item[0]+"</button> "}return'<div id="'+PREFIX+'action" style="display: none;">'+tmpHTML+"</div>"},DebugPanel.prototype._renderMeta=function(){this.metaInfo=[[config.show,"&#xe80a;","Go to help",function(){global.open("https://github.com/seajs/seajs-debug/issues/4","_blank")}],[config.show,"&#xe802;","Minimize console",function(){this.hide()}],[!config.show,"&#xe803;","Maximize console",function(){this.show()}]];for(var tmpHTML="",i=0;i<this.metaInfo.length;i++){var item=this.metaInfo[i];tmpHTML+='<button title="'+item[2]+'">'+item[1]+"</button>"}return'<div id="'+PREFIX+'meta">'+tmpHTML+"</div>"},DebugPanel.prototype._renderHealth=function(){return'<div id="'+PREFIX+'health" style="display: none;"></div>'},DebugPanel.prototype._bindMap=function(){addEvent(this.mapElement,"click",function(e){var target=e.target||e.srcElement;if("button"===target.tagName.toLowerCase()){var p=target.parentNode,parent=p.parentNode;if("add"===target.getAttribute("data-name")){var newElem=doc.createElement("p");newElem.innerHTML=p.innerHTML,parent.appendChild(newElem),newElem.getElementsByTagName("input")[0].focus(),target.style.display="none",target.nextSibling.style.display="inline-block"}else"red"===target.getAttribute("data-name")&&parent.removeChild(p)}})},DebugPanel.prototype._bindStatus=function(){this.statusTipElement=this.statusElement.getElementsByTagName("span")[0];for(var that=this,buttons=this.statusElement.getElementsByTagName("button"),i=0;i<buttons.length;i++)!function(button,i){addEvent(button,"click",function(){var item=that.statusInfo[i],newVal=!config[item[0]];config[item[0]]=newVal,that.save(),button.setAttribute("title",item[newVal?1:2]),that.statusTipElement.innerHTML=item[newVal?1:2],button.className=newVal?STATUS_BUTTON_ON_CLS:"",item[4]&&item[4].call(that,newVal)}),addEvent(button,"mouseover",function(){var item=that.statusInfo[i];that.statusTipElement.innerHTML=item[config[item[0]]?1:2]}),addEvent(button,"mouseout",function(){that.statusTipElement.innerHTML=""})}(buttons[i],i)},DebugPanel.prototype._bindAction=function(){for(var that=this,buttons=this.actionElement.getElementsByTagName("button"),i=0;i<buttons.length;i++)!function(button,i){addEvent(button,"click",function(){var item=that.actionInfo[i];item[1].call(that)&&(that.save(),item[2]?loc.replace(loc.href.replace("seajs-debug","")):loc.reload())})}(buttons[i],i)},DebugPanel.prototype._bindMeta=function(){for(var that=this,buttons=this.metaElement.getElementsByTagName("button"),i=0;i<buttons.length;i++)!function(button,i){addEvent(button,"click",function(){var item=that.metaInfo[i];item[3]&&item[3].call(that),that.save()})}(buttons[i],i)},DebugPanel.prototype._bindHealth=function(){},DebugPanel.prototype.show=function(){this.element.className="",config.show=!0;for(var i=0;i<this.children.length;i++){var item=this.children[i];-1===indexOf(["meta","health","editor","map"],item)&&this[item+"Element"]&&(this[item+"Element"].style.display="block")}config.health?this.switchTo("health"):config.mode?(this.switchTo("editor"),this.editorElement.focus()):this.switchTo("map");var buttons=this.metaElement.getElementsByTagName("button");buttons[0].style.display="inline-block",buttons[1].style.display="inline-block",buttons[2].style.display="none"},DebugPanel.prototype.hide=function(){this.element.className=MIN_CLS,config.show=!1;for(var i=0;i<this.children.length;i++){var item=this.children[i];"meta"!==item&&this[item+"Element"]&&(this[item+"Element"].style.display="none")}var buttons=this.metaElement.getElementsByTagName("button");buttons[0].style.display="none",buttons[1].style.display="none",buttons[2].style.display="inline-block"},DebugPanel.prototype.switchTo=function(toPanel){for(var allPanels=["health","editor","map"],i=0;3>i;i++){var item=allPanels[i];this[item+"Element"]&&(this[item+"Element"].style.display=toPanel===item?"block":"none")}},DebugPanel.prototype.save=function(){store.set("seajs-debug-config",config)},DebugPanel.prototype.setHitInput=function(i,hit){if(this.mapElement){var item=this.mapElement.getElementsByTagName("p")[i];item&&hit&&(item.className=HIT_CLS)}},DebugPanel.prototype.destory=function(child){var fn=this["_destory"+child.charAt(0).toUpperCase()+child.substring(1)];fn&&fn.call(this)};var debugPanel=new DebugPanel;if(debugPanel.config=config,loc.search.indexOf("seajs-debug")>-1&&(config.debug=!0),seajs.config({debug:config.debug}),config.debug){if(debugPanel.render(["map","editor","health","status","action"]),doc.title="[Sea.js Debug Mode] - "+doc.title,seajs.config({map:[function(uri){for(var oldUri=uri,i=0;i<config.mapping.length;i++)config.mapping[i][0].length&&config.mapping[i][1]&&(uri=uri.replace(config.mapping[i][0],config.mapping[i][1]),debugPanel.setHitInput(i,uri!==oldUri));return config.source&&!/\-debug\.(js|css)+/g.test(uri)&&(uri=uri.replace(/\/(.*)\.(js|css)/g,"/$1-debug.$2")),uri}]}),config.nocache){var TIME_STAMP=(new Date).getTime();seajs.on("fetch",function(data){if(data.uri){var uri=data.requestUri||data.uri;data.requestUri=(uri+(-1===uri.indexOf("?")?"?t=":"&t=")+TIME_STAMP).slice(0,2e3)}}),seajs.on("define",function(data){data.uri&&(data.uri=data.uri.replace(/[\?&]t*=*\d*$/g,""))})}if(config.combo&&seajs.config({comboExcludes:/.*/}),config.log&&seajs.config({preload:"seajs-log"}),config.health&&seajs.config({preload:"seajs-health"}),config.custom){var _config={};try{_config=new Function("return "+config.custom)()}catch(e){}seajs.config(_config)}}if(!seajs.find){var cachedModules=seajs.cache;seajs.find=function(selector){var matches=[];for(var uri in cachedModules)if(cachedModules.hasOwnProperty(uri)&&("string"==typeof selector&&uri.indexOf(selector)>-1||selector instanceof RegExp&&selector.test(uri))){var mod=cachedModules[uri];mod.exports&&matches.push(mod.exports)}return matches}}}();